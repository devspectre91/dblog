(this.webpackJsonpsample=this.webpackJsonpsample||[]).push([[0],{38:function(e,t,s){},40:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s.n(a),i=s(21),c=s.n(i),r=(s(27),s(15)),l=s(11),o=s.n(l),h=s(13),d=s(3),u=s(4),j=s(6),p=s(5),m=s(7),b=s(2),x=s(0),f=function(e){Object(j.a)(s,e);var t=Object(p.a)(s);function s(e){var a;return Object(d.a)(this,s),(a=t.call(this,e)).handleChange=function(e){"email"===e.target.name?a.setState({email:e.target.value,error:""}):a.setState({password:e.target.value})},a.handleClick=function(e){a.state.error||a.setState({status:"loading"},(function(){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{email:a.state.email,password:a.state.password}})};fetch("https://mighty-oasis-08080.herokuapp.com/api/users/login",e).then((function(e){return e.json()})).then((function(e){console.log(e),"errors"in e?a.setState({error:"Either username or password ".concat(e.errors["email or password"]),status:null},(function(){a.props.history.push("/login")})):"user"in e&&(console.log(e),localStorage.setItem("userInfo",JSON.stringify(e.user)),a.setState({emailError:"",passwordError:""},(function(){a.props.logIn(e.user),a.props.history.push("/dashboard")})))}))}))},a.state={status:null,email:"",error:""},a}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.props.userInfo&&this.props.history.push("/dashboard")}},{key:"render",value:function(){return Object(x.jsx)("div",{className:"columns is-centered py-5",children:"loading"===this.state.status?Object(x.jsxs)("div",{className:" py-5 pb-6 px-4 column articles-loading is-half is-size-2 has-text-centered has-text-success-dark",children:[" ","Logging in ",Object(x.jsxs)("div",{className:"lds-ellipsis ",children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{})]})]}):Object(x.jsxs)("div",{className:"box m-6 py-5 pb-6 px-4 column is-half has-background-light",children:[Object(x.jsx)("div",{className:"title has-text-centered my-1",children:"Login"}),Object(x.jsx)(b.b,{to:"/register",children:Object(x.jsx)("div",{className:"has-text-centered mb-4 has-text-success",children:"Need an account?"})}),this.state.error?Object(x.jsx)("div",{className:"has-text-danger",children:this.state.error}):null,Object(x.jsx)("div",{className:"field",children:Object(x.jsxs)("p",{className:"control has-icons-left has-icons-right",children:[Object(x.jsx)("input",{className:"input",type:"email",placeholder:"Email",onChange:this.handleChange,name:"email"}),Object(x.jsx)("span",{className:"icon is-small is-left",children:Object(x.jsx)("i",{className:"fas fa-envelope"})}),Object(x.jsx)("span",{className:"icon is-small is-right",children:Object(x.jsx)("i",{className:"fas fa-check"})})]})}),Object(x.jsx)("div",{className:"field",children:Object(x.jsxs)("p",{className:"control has-icons-left",children:[Object(x.jsx)("input",{className:"input",type:"password",placeholder:"Password",onChange:this.handleChange,name:"password"}),Object(x.jsx)("span",{className:"icon is-small is-left",children:Object(x.jsx)("i",{className:"fas fa-lock"})})]})}),Object(x.jsx)("div",{className:"field",children:Object(x.jsxs)("p",{className:"control level",children:[Object(x.jsx)("div",{className:"level-left"}),Object(x.jsx)("button",{className:"button is-success level-right",onClick:this.handleClick,children:"Login"})]})})]})})}}]),s}(a.Component),g=Object(m.f)(f),O=function(e){Object(j.a)(s,e);var t=Object(p.a)(s);function s(e){var a;return Object(d.a)(this,s),(a=t.call(this,e)).validateEmail=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},a.validatePassword=function(e){e.match("^(?=.*[0-9])(?=.*[a-zA-Z])[a-zA-Z0-9]+$")?a.setState({passwordError:""},(function(){e.length<6?a.setState({passwordError:"Must be atleast 6 characters long."}):a.setState({passwordError:""})})):a.setState({passwordError:"Must contain an alphabet and a digit"})},a.handleChange=function(e){"email"===e.target.name?a.setState({email:e.target.value},(function(){a.validateEmail(a.state.email)?a.setState({emailError:""}):a.setState({emailError:"Validation Error"}),""===a.state.email&&a.setState({emailError:"Field cannot be empty"})})):"username"===e.target.name?a.setState({username:e.target.value,usernameError:""}):a.setState({password:e.target.value},(function(){a.validatePassword(a.state.password)}))},a.handleClick=function(e){a.state.emailError||a.state.passwordError||a.setState({status:"loading"},(function(){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:a.state.username,email:a.state.email,password:a.state.password}})};fetch("https://mighty-oasis-08080.herokuapp.com/api/users",e).then((function(e){return e.json()})).then((function(e){console.log(e),"errors"in e?a.setState({emailError:e.errors.email,usernameError:e.errors.username,status:null},(function(){a.props.history.push("/register")})):"user"in e&&(localStorage.setItem("userInfo",e.user.token),a.setState({emailError:"",userNameError:"",passwordError:""},(function(){a.props.history.push("/login")})))}))}))},a.state={status:null,username:"",userNameError:"",email:"",emailError:"",password:"",passwordError:""},a}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.props.userInfo&&this.props.history.push("/dashboard")}},{key:"render",value:function(){return Object(x.jsx)("div",{className:"columns is-centered py-0",children:"loading"===this.state.status?Object(x.jsxs)("div",{className:" py-5 pb-6 px-4 column articles-loading is-half is-size-2 has-text-centered has-text-success-dark",children:[" ","Creating User  ",Object(x.jsxs)("div",{className:"lds-ellipsis ",children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{})]})]}):Object(x.jsxs)("div",{className:"box m-6 py-5 pb-6 px-4 column is-half has-background-light",children:[Object(x.jsx)("div",{className:"title has-text-centered my-1",children:"Sign Up"}),Object(x.jsx)(b.b,{to:"/login",children:Object(x.jsx)("div",{className:"has-text-centered mb-4 has-text-success",children:"Have an account?"})}),Object(x.jsx)("div",{class:"field",children:Object(x.jsxs)("p",{class:"control has-icons-left",children:[Object(x.jsx)("input",{class:"input",type:"text",name:"username",value:this.state.username,onChange:this.handleChange,placeholder:"Username"}),Object(x.jsx)("span",{class:"icon is-small is-left",children:Object(x.jsx)("i",{class:"fas fa-user"})}),this.state.usernameError?Object(x.jsx)("div",{className:"has-text-danger",children:this.state.usernameError}):null]})}),Object(x.jsx)("div",{class:"field",children:Object(x.jsxs)("p",{class:"control has-icons-left has-icons-right",children:[Object(x.jsx)("input",{class:"input",type:"email",placeholder:"Email",name:"email",value:this.state.email,onChange:this.handleChange}),Object(x.jsx)("span",{class:"icon is-small is-left",children:Object(x.jsx)("i",{class:"fas fa-envelope"})}),this.state.emailError?null:Object(x.jsx)("span",{class:"icon is-small is-right",children:Object(x.jsx)("i",{class:"fas fa-check"})}),this.state.emailError?Object(x.jsx)("div",{className:"has-text-danger",children:this.state.emailError}):null]})}),Object(x.jsx)("div",{class:"field",children:Object(x.jsxs)("p",{class:"control has-icons-left",children:[Object(x.jsx)("input",{class:"input",type:"password",name:"password",onChange:this.handleChange,placeholder:"Password"}),Object(x.jsx)("span",{class:"icon is-small is-left",children:Object(x.jsx)("i",{class:"fas fa-lock"})}),this.state.passwordError?Object(x.jsx)("div",{className:"has-text-danger",children:this.state.passwordError}):null]})}),Object(x.jsx)("div",{class:"field ",children:Object(x.jsxs)("p",{class:"control level ",children:[Object(x.jsx)("div",{className:"level-left"}),Object(x.jsx)("button",{class:"button level-right is-success",onClick:this.handleClick,children:"Sign Up"})]})})]})})}}]),s}(a.Component),v=Object(m.f)(O),N=function(e){Object(j.a)(s,e);var t=Object(p.a)(s);function s(){return Object(d.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return Object(x.jsxs)("nav",{className:"navbar is-light px-6 py-4 ",role:"navigation","aria-label":"main navigation",children:[Object(x.jsxs)("div",{className:"navbar-brand",children:[Object(x.jsx)("div",{className:"navbar-item ",children:Object(x.jsxs)(b.b,{to:"/",className:"has-text-dark brand",children:[" ","Dblog !"]})}),Object(x.jsxs)("div",{role:"button",className:"navbar-burger has-text-white","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample",children:[Object(x.jsx)("span",{"aria-hidden":"true"}),Object(x.jsx)("span",{"aria-hidden":"true"}),Object(x.jsx)("span",{"aria-hidden":"true"})]})]}),this.props.userInfo?Object(x.jsxs)("div",{className:"navbar-end",children:[Object(x.jsx)("div",{className:"navbar-item",children:Object(x.jsx)(b.b,{to:"/new",className:"button is-dark mr-4",children:Object(x.jsx)("i",{className:"fas fa-feather-alt"})})}),Object(x.jsx)("figure",{class:"image is-48x48 mt-2 ",children:Object(x.jsx)("img",{className:"is-rounded",src:this.props.userInfo.image?this.props.userInfo.image:"https://static.productionready.io/images/smiley-cyrus.jpg",alt:"profile"})}),Object(x.jsx)("div",{className:"navbar-item  is-size-5 is-capitalized",children:Object(x.jsxs)(b.b,{className:"has-text-weight-bold has-text-success-dark",to:"/profiles/".concat(this.props.userInfo.username),children:[" ",this.props.userInfo.username]})}),Object(x.jsx)("div",{className:"navbar-item",children:Object(x.jsxs)("div",{className:"buttons is-centered ",children:[Object(x.jsx)(b.b,{to:"/settings",className:"button is-dark mr-4",children:Object(x.jsx)("i",{className:"fas fa-user-cog"})}),Object(x.jsx)(b.b,{to:"/",className:"button is-success",onClick:function(){e.props.logOut()},children:"Log out"})]})})]}):Object(x.jsx)("div",{className:"navbar-end",children:Object(x.jsx)("div",{className:"navbar-item",children:Object(x.jsxs)("div",{className:"buttons is-centered ",children:[Object(x.jsx)(b.b,{to:"/register",className:"button is-dark mr-4",children:Object(x.jsx)("strong",{children:"Sign up"})}),Object(x.jsx)(b.b,{to:"/login",className:"button   ",children:"Log in"})]})})})]})}}]),s}(a.Component),y=function(e){Object(j.a)(s,e);var t=Object(p.a)(s);function s(){return Object(d.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.props.userInfo&&this.props.history.push("/dashboard")}},{key:"render",value:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"hero is-dark",children:Object(x.jsxs)("div",{className:"hero-body has-text-centered ",children:[Object(x.jsxs)("div",{className:"is-size-1 has-text-light has-text-weight-bold mt-6",children:["Welcome to"," ",Object(x.jsx)("span",{className:"has-text-success-dark brand is-size-1",children:"Dblog!"})]}),Object(x.jsx)("div",{className:"is-size-3 has-text-light",children:"Browse articles by amazing authors or publish one."})]})}),Object(x.jsx)("div",{className:"level",children:Object(x.jsx)("div",{className:"level-item",children:Object(x.jsx)(b.b,{to:"/articles",children:Object(x.jsx)("div",{className:"button is-dark feed-button",children:Object(x.jsx)("strong",{children:"Articles Feed"})})})})})]})}}]),s}(a.Component),k=Object(m.f)(y),C=function(e){Object(j.a)(s,e);var t=Object(p.a)(s);function s(e){var a;return Object(d.a)(this,s),(a=t.call(this,e)).handleClick=function(e){var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.props.userInfo?"Bearer ".concat(a.props.userInfo.token):null}};"reset"===e.target.dataset.id?(console.log("if"),fetch("https://mighty-oasis-08080.herokuapp.com/api/articles?limit=10").then((function(e){return e.json()})).then((function(e){return console.log(e.articles.length),e.articles})).then((function(e){a.setState({articles:e,currentTag:"",breadcrumb:"reset"},(function(){fetch("https://mighty-oasis-08080.herokuapp.com/api/articles?limit={".concat(a.props.maxArticles,"}")).then((function(e){return e.json()})).then((function(e){return e.articles})).then((function(e){console.log(Math.floor(e.length/10));var t=e.length%10===0?Math.floor(e.length/10):Math.floor(e.length/10)+1;a.setState({noOfPages:t})}))}))}))):"page"===e.target.dataset.id?(console.log(e.target.innerText),fetch("https://mighty-oasis-08080.herokuapp.com/api/articles?limit=10&&offset=".concat(10*(Number(e.target.innerText)-1))).then((function(e){return e.json()})).then((function(e){return console.log(e.articles.length),e.articles})).then((function(t){a.setState({articles:t,currentPage:e.target.innerText})}))):"feed"===e.target.dataset.id?(console.log("success"),fetch("https://mighty-oasis-08080.herokuapp.com/api/articles/feed?limit=10",t).then((function(e){return e.json()})).then((function(e){return console.log(e.articles),e.articles})).then((function(e){a.setState({articles:e,breadcrumb:"feed"})})),fetch("https://mighty-oasis-08080.herokuapp.com/api/articles/feed",t).then((function(e){return e.json()})).then((function(e){return e.articles})).then((function(e){console.log(Math.floor(e.length/10));var t=e.length%10===0?Math.floor(e.length/10):Math.floor(e.length/10)+1;a.setState({noOfPages:t})}))):(console.log("else"),fetch("https://mighty-oasis-08080.herokuapp.com/api/articles?tag=".concat(e.target.dataset.id)).then((function(e){return e.json()})).then((function(e){return console.log(e.articles.length),e.articles})).then((function(t){a.setState({articles:t,noOfPages:t.length%10===0?Math.floor(t.length/10):Math.floor(t.length/10)+1,currentTag:e.target.dataset.id})})))},a.getPages=function(){var e=[];if(1===a.state.noOfPages)return null;for(var t=1;t<=a.state.noOfPages;t++)e.push(Object(x.jsx)("li",{children:Object(x.jsx)("div",{"data-id":"page",className:a.state.currentPage==t?"pagination-link has-background-dark has-text-white":"pagination-link has-background-light",onClick:a.handleClick,children:t})}));return e},a.state={articles:null,noOfPages:1,currentTag:null,tags:null,currentPage:1,breadcrumb:"feed"},a}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t,s=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.userInfo){e.next=8;break}return t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.userInfo.token)}},e.next=4,fetch("https://mighty-oasis-08080.herokuapp.com/api/articles/feed?limit=10",t).then((function(e){return e.json()})).then((function(e){return console.log(e.articles.length),e.articles})).then((function(e){s.setState({articles:e})}));case 4:return e.next=6,fetch("https://mighty-oasis-08080.herokuapp.com/api/articles/feed",t).then((function(e){return e.json()})).then((function(e){return e.articles})).then((function(e){console.log(Math.floor(e.length/10));var t=e.length%10===0?Math.floor(e.length/10):Math.floor(e.length/10)+1;s.setState({noOfPages:t})}));case 6:e.next=13;break;case 8:return console.log("else"),e.next=11,fetch("https://mighty-oasis-08080.herokuapp.com/api/articles?limit=10").then((function(e){return e.json()})).then((function(e){return console.log(e),e.articles})).then((function(e){s.setState({articles:e})}));case 11:return e.next=13,fetch("https://mighty-oasis-08080.herokuapp.com/api/articles?limit={".concat(this.props.maxArticles,"}")).then((function(e){return e.json()})).then((function(e){return e.articles})).then((function(e){console.log(e.length);var t=e.length%10===0?Math.floor(e.length/10):Math.floor(e.length/10)+1;s.setState({noOfPages:t})}));case 13:return e.next=15,fetch("https://mighty-oasis-08080.herokuapp.com/api/tags").then((function(e){return e.json()})).then((function(e){return e.tags})).then((function(e){s.setState({tags:e})}));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)("nav",{class:"breadcrumb py-2 mt-4","aria-label":"breadcrumbs",children:Object(x.jsxs)("ul",{children:[this.props.userInfo?Object(x.jsx)("li",{children:Object(x.jsxs)(b.b,{className:"feed"===this.state.breadcrumb?"has-text-success":"has-text-dark",to:"/dashboard",children:[Object(x.jsx)("span",{class:"icon is-small",children:Object(x.jsx)("i",{class:"fas fa-book","aria-hidden":"true"})}),Object(x.jsx)("span",{"data-id":"feed",onClick:this.handleClick,children:"My Feed"})]})}):"",this.props.userInfo?Object(x.jsxs)("li",{children:[Object(x.jsxs)(b.b,{className:"reset"===this.state.breadcrumb?"has-text-success":"has-text-dark",to:"/dashboard",children:[Object(x.jsx)("span",{class:"icon is-small",children:Object(x.jsx)("i",{class:"fas fa-book","aria-hidden":"true"})}),Object(x.jsx)("span",{"data-id":"reset",onClick:this.handleClick,children:"Global Feed"})]})," "]}):Object(x.jsx)("li",{children:Object(x.jsxs)(b.c,{activeClassName:"has-text-success",to:"/articles",children:[Object(x.jsx)("span",{class:"icon is-small",children:Object(x.jsx)("i",{class:"fas fa-book","aria-hidden":"true"})}),Object(x.jsx)("span",{"data-id":"reset",onClick:this.handleClick,children:"Global Feed"})]})}),this.state.currentTag?Object(x.jsx)("li",{children:Object(x.jsx)("div",{className:"ml-4 has-text-info-dark",children:Object(x.jsxs)("span",{children:["#",this.state.currentTag]})})}):""]})}),this.state.articles?Object(x.jsxs)("div",{className:"columns container mx-1",children:[Object(x.jsxs)("div",{className:"p-2 column is-8  ",children:[0===this.state.articles.length?Object(x.jsx)("div",{className:"sub-title has-text-danger",children:"No articles found :("}):"",this.state.articles.map((function(e){return Object(x.jsxs)("div",{className:"box  px-4 mb-6 has-background-light",children:[Object(x.jsx)("div",{className:"is-size-4 has-text-dark has-text-weight-bold py-5",children:e.title}),Object(x.jsx)("div",{class:"field  is-grouped is-grouped-multiline",children:Object(x.jsx)("div",{class:"control  article-tag",children:Object(x.jsxs)("div",{class:"tags  p-0 m-0 has-addons",children:[Object(x.jsx)("span",{class:"tag is-dark",children:e.createdAt.split("T")[0]}),Object(x.jsx)(b.b,{to:"/profiles/".concat(e.author.username),class:"tag is-danger",children:e.author.username})]})})}),Object(x.jsxs)(b.b,{to:"/articles/".concat(e.slug),children:[" ",Object(x.jsx)("div",{className:"button read-more is-small is-dark",children:"Read More"})]}),Object(x.jsxs)("div",{className:"hearts",children:[Object(x.jsx)("span",{className:"",children:Object(x.jsx)("i",{className:"fas fa-heart"})}),Object(x.jsxs)("span",{className:"is-size-6 has-text-weight-bold mx-1",children:[" ",e.favoritesCount]})]})]},e.slug)})),Object(x.jsx)("nav",{class:"pagination is-centered my-6",role:"navigation","aria-label":"pagination",children:Object(x.jsx)("ul",{class:"pagination-list",children:this.getPages()})})]})," ",Object(x.jsx)("div",{className:"column pl-6 pt-2 is-4",children:Object(x.jsx)("div",{className:" tag-box box  has-background-light",children:this.state.tags?Object(x.jsx)("div",{className:"tags",children:this.state.tags.map((function(t){if(t)return Object(x.jsxs)("div",{className:e.state.currentTag===t?"tag is-danger":"tag is-dark","data-id":t,onClick:e.handleClick,children:[" ",t]},t)}))}):Object(x.jsxs)("div",{className:"lds-ellipsis ",children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{})]})})})]}):Object(x.jsxs)("div",{className:"lds-ellipsis ",children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{})]})]})}}]),s}(a.Component),S=function(e){Object(j.a)(s,e);var t=Object(p.a)(s);function s(e){var a;return Object(d.a)(this,s),(a=t.call(this,e)).handleChange=function(e){"cbody"===e.target.name&&a.setState({cbody:e.target.value})},a.handleClick=function(e){console.log(e.target.dataset.id),"heart"===e.target.dataset.id?a.setState((function(e){var t=e.favorited?e.likes-1:e.likes+1;return{favorited:!e.favorited,likes:t}}),(function(){var e={method:a.state.favorited?"POST":"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.props.userInfo.token)}};fetch("https://mighty-oasis-08080.herokuapp.com/api/articles/".concat(a.props.match.params.slug,"/favorite"),e).then((function(e){return e.json()})).then((function(e){a.setState({article:e.article,favorited:e.article.favorited})}))})):"delete"===e.target.dataset.id?a.setState({status:"deleting"},(function(){var e={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.props.userInfo.token)}};fetch("https://mighty-oasis-08080.herokuapp.com/api/articles/".concat(a.props.match.params.slug),e).then((function(){a.props.history.push("/profiles/".concat(a.props.userInfo.username))}))})):"comment"===e.target.dataset.id?a.setState({commentStatus:!1},(function(){var e={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.props.userInfo.token)},body:JSON.stringify({comment:{body:a.state.cbody}})};fetch("https://mighty-oasis-08080.herokuapp.com/api/articles/".concat(a.props.match.params.slug,"/comments"),e).then((function(e){return e.json()})).then((function(e){a.setState((function(t){return{comments:t.comments.concat(e.comment),commentStatus:!0,cbody:""}}))}))})):"cdelete"===e.target.dataset.id&&a.setState({commentStatus:!1},(function(){var t={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.props.userInfo.token)}};fetch("https://mighty-oasis-08080.herokuapp.com/api/articles/".concat(a.props.match.params.slug,"/comments/").concat(e.target.dataset.commentid),t).then((function(){fetch("https://mighty-oasis-08080.herokuapp.com/api/articles/".concat(a.props.match.params.slug,"/comments")).then((function(e){return e.json()})).then((function(e){0!==e.comments.length?a.setState({comments:e.comments,commentStatus:!0}):a.setState({error:!0})}))}))}))},a.state={article:null,favorited:!1,status:null,commentStatus:!1,comments:[],likes:null,cbody:null,error:!1},a}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t,s=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",headers:{"Content-Type":"application/json",Authorization:this.props.userInfo?"Bearer ".concat(this.props.userInfo.token):null}},e.next=3,fetch("https://mighty-oasis-08080.herokuapp.com/api/articles/".concat(this.props.match.params.slug),t).then((function(e){return e.json()})).then((function(e){s.setState({article:e.article,favorited:e.article.favorited,likes:e.article.favoritesCount})}));case 3:return e.next=5,fetch("https://mighty-oasis-08080.herokuapp.com/api/articles/".concat(this.props.match.params.slug,"/comments")).then((function(e){return e.json()})).then((function(e){0!==e.comments.length?s.setState({comments:e.comments,commentStatus:!0}):s.setState({error:!0})}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(x.jsx)(x.Fragment,{children:"deleting"===this.state.status?Object(x.jsxs)("div",{className:" py-5 pb-6 px-4 column articles-loading is-half is-size-2 has-text-centered has-text-success-dark",children:["Deleting Article ",Object(x.jsxs)("div",{className:"lds-ellipsis ",children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{})]})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"hero is-dark is-small py-6",children:this.state.article?Object(x.jsxs)("div",{className:"hero-body mx-6",children:[Object(x.jsx)("div",{className:"is-size-1",children:this.state.article.title}),Object(x.jsx)("div",{className:"subtitle has-text-success has-text-justified",children:this.state.article.description}),Object(x.jsxs)("div",{className:"level",children:[Object(x.jsxs)("div",{className:"level-left",children:[Object(x.jsx)("figure",{class:"image is-48x48 ",children:Object(x.jsx)("img",{className:"is-rounded",src:this.state.article.author.image?this.state.article.author.image:"https://static.productionready.io/images/smiley-cyrus.jpg",alt:"profile"})}),Object(x.jsx)(b.b,{to:"/profiles/".concat(this.state.article.author.username),className:"ml-4",children:this.state.article.author.username}),Object(x.jsx)("span",{className:"ml-4",children:"".concat(this.state.article.createdAt.split("T")[0])})]}),this.props.userInfo?Object(x.jsxs)("div",{className:"level-right ",children:[Object(x.jsx)("span",{className:this.state.favorited?"pointer-link has-text-danger":"pointer-link",children:Object(x.jsx)("i",{className:"fas fa-heart ","data-id":"heart",onClick:this.handleClick})}),Object(x.jsxs)("span",{className:"is-size-6 mx-2",children:[" ",this.state.likes]})]}):""]}),Object(x.jsxs)("div",{className:"level",children:[Object(x.jsx)("div",{className:"tags mt-4  level-left",children:this.state.article.tagList.map((function(e){return Object(x.jsx)("div",{className:"tag is-danger",children:e})}))}),this.props.userInfo&&this.props.userInfo.username===this.state.article.author.username?Object(x.jsxs)("div",{className:"level-right buttons",children:[Object(x.jsx)(b.b,{to:"/article/edit/".concat(this.state.article.slug),className:"button",children:"Edit"}),Object(x.jsx)("div",{"data-id":"delete",onClick:this.handleClick,className:"button is-danger",children:"Delete"})]}):""]})]}):Object(x.jsxs)("div",{className:"articles-loading mx-6 px-6 py-6 is-size-4",children:["Loading ",Object(x.jsxs)("div",{className:"lds-ellipsis ",children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{})]})]})}),Object(x.jsx)("div",{className:"mx-6 py-6  px-6 article-body",children:Object(x.jsx)("div",{className:"is-size-5 has-text-justified ",children:this.state.article?this.state.article.body:Object(x.jsx)("div",{className:"articles-loading",children:' "Loading..."'})})}),Object(x.jsxs)("div",{className:"has-background-light  p-6",children:[Object(x.jsx)("div",{className:"title mx-6",children:"Comments"}),this.props.userInfo?Object(x.jsxs)("div",{className:" px-6 comment-form",children:[Object(x.jsx)("div",{class:"field",children:Object(x.jsx)("p",{class:"control",children:Object(x.jsx)("textarea",{class:"textarea p-3",name:"cbody",placeholder:"Drop your thoughts here...",value:this.state.cbody,onChange:this.handleChange})})}),Object(x.jsx)("div",{class:"field ",children:Object(x.jsxs)("p",{class:"control level mb-1",children:[Object(x.jsx)("div",{className:"level-left"}),Object(x.jsx)("button",{class:"button level-right is-success",onClick:this.handleClick,"data-id":"comment",children:"Add Comment"})]})})]}):"",Object(x.jsx)("div",{className:"mx-6 py-3 px-1 comments",children:this.state.commentStatus?this.state.comments.map((function(t){return Object(x.jsxs)("div",{className:"comment my-6 has-background-white columns mx-2",children:[Object(x.jsx)("div",{className:"column is-1 pl-5",children:Object(x.jsx)("figure",{class:"image is-48x48 mr-2",children:Object(x.jsx)("img",{className:"is-rounded",src:t.author.image?t.author.image:"https://static.productionready.io/images/smiley-cyrus.jpg",alt:"profile"})})}),Object(x.jsxs)("div",{className:"column is-11  py-2",children:[Object(x.jsxs)("div",{className:"level",children:[Object(x.jsx)("div",{className:"level-left",children:Object(x.jsxs)("div",{className:"is-size-5 is-capitalized",children:[t.author.username," ",Object(x.jsx)("span",{className:"is-size-6 has-text-info-dark has-text-weight-normal",children:" #".concat(t.createdAt.split("T")[0])})]})}),e.props.userInfo&&e.props.userInfo.username===t.author.username?Object(x.jsx)("div",{className:"level-right",children:Object(x.jsx)("span",{class:"icon pointer-link is-small has-text-danger",children:Object(x.jsx)("i",{class:"fas fa-trash","data-commentid":t.id,"data-id":"cdelete",onClick:e.handleClick})})}):""]}),Object(x.jsx)("div",{className:"is-size-5 has-text-weight-bold ",children:t.body})]})]})})):this.state.error?Object(x.jsx)("div",{className:"has-text-weight-bold subtitle px-2 py-4",children:"No comments yet!"}):Object(x.jsxs)("div",{className:"lds-ellipsis ",children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{})]})})]})]})})}}]),s}(a.Component),I=Object(m.f)(S),w=function(e){Object(j.a)(s,e);var t=Object(p.a)(s);function s(){return Object(d.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.props.userInfo||this.props.history.push("/")}},{key:"render",value:function(){return Object(x.jsx)(C,{maxArticles:this.props.maxArticles,userInfo:this.props.userInfo})}}]),s}(a.Component),E=Object(m.f)(w),T=function(e){Object(j.a)(s,e);var t=Object(p.a)(s);function s(e){var a;return Object(d.a)(this,s),(a=t.call(this,e)).handleClick=function(e){console.log(e.target),"published"===e.target.dataset.id?fetch("https://mighty-oasis-08080.herokuapp.com/api/articles/?author=".concat(a.props.user.username)).then((function(e){return e.json()})).then((function(e){return console.log(e.articles.length),e.articles})).then((function(e){var t=e.length%10===0?Math.floor(e.length/10):Math.floor(e.length/10)+1;a.setState({articles:e,noOfPages:t,breadcrumb:"published"})})):"favorited"===e.target.dataset.id&&fetch("https://mighty-oasis-08080.herokuapp.com/api/articles/?favorited=".concat(a.props.user.username)).then((function(e){return e.json()})).then((function(e){return console.log(e.articles.length),e.articles})).then((function(e){var t=e.length%10===0?Math.floor(e.length/10):Math.floor(e.length/10)+1;a.setState({articles:e,noOfPages:t,breadcrumb:"favorited"})}))},a.getPages=function(){var e=[];if(1===a.state.noOfPages)return null;for(var t=1;t<=a.state.noOfPages;t++)e.push(Object(x.jsx)("li",{children:Object(x.jsx)("div",{"data-id":"page",className:a.state.currentPage==t?"pagination-link has-background-dark has-text-white":"pagination-link has-background-light",onClick:a.handleClick,children:t})}));return e},a.state={articles:null,breadcrumb:"published",user:null},a}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://mighty-oasis-08080.herokuapp.com/api/articles/?author=".concat(this.props.user.username)).then((function(e){return e.json()})).then((function(e){return console.log(e.articles.length),e.articles})).then((function(e){var s=e.length%10===0?Math.floor(e.length/10):Math.floor(e.length/10)+1;t.setState({articles:e,noOfPages:s})}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)("nav",{class:"breadcrumb py-2 mt-4","aria-label":"breadcrumbs",children:Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:Object(x.jsxs)("div",{className:"published"===this.state.breadcrumb?"has-text-success mx-3 pointer-link":"has-text-dark mx-3 pointer-link",children:[Object(x.jsx)("span",{class:"icon is-small",children:Object(x.jsx)("i",{class:"fas fa-book","aria-hidden":"true"})}),Object(x.jsx)("span",{"data-id":"published",onClick:this.handleClick,children:"Published"})]})}),Object(x.jsx)("li",{children:Object(x.jsxs)("div",{className:"favorited"===this.state.breadcrumb?"has-text-success mx-3 pointer-link":"has-text-dark mx-3 pointer-link",children:[Object(x.jsx)("span",{class:"icon is-small",children:Object(x.jsx)("i",{class:"fas fa-book","aria-hidden":"true"})}),Object(x.jsx)("span",{"data-id":"favorited",onClick:this.handleClick,children:"Favourited"})]})})]})}),this.state.articles?Object(x.jsxs)("div",{className:"columns container mx-1",children:[Object(x.jsxs)("div",{className:"p-2 column is-full  ",children:[0===this.state.articles.length?Object(x.jsx)("div",{className:"sub-title has-text-danger",children:"No articles found :("}):"",this.state.articles.map((function(e){return Object(x.jsxs)("div",{className:"box  px-4 mb-6 has-background-light",children:[Object(x.jsx)("div",{className:"is-size-4 has-text-dark has-text-weight-bold py-5",children:e.title}),Object(x.jsx)("div",{class:"field  is-grouped is-grouped-multiline",children:Object(x.jsx)("div",{class:"control  article-tag",children:Object(x.jsxs)("div",{class:"tags  p-0 m-0 has-addons",children:[Object(x.jsx)("span",{class:"tag is-dark",children:e.createdAt.split("T")[0]}),Object(x.jsx)(b.b,{to:"/profiles/".concat(e.author.username),class:"tag is-danger",children:e.author.username})]})})}),Object(x.jsxs)(b.b,{to:"/articles/".concat(e.slug),children:[" ",Object(x.jsx)("div",{className:"button read-more is-small is-dark",children:"Read More"})]})]},e.slug)}))]})," "]}):Object(x.jsxs)("div",{className:"lds-ellipsis ",children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{})]})]})}}]),s}(a.Component),z=function(e){Object(j.a)(s,e);var t=Object(p.a)(s);function s(e){var a;return Object(d.a)(this,s),(a=t.call(this,e)).handleClick=function(e){"follow"===e.target.dataset.id?a.setState({following:!0},(function(){var e={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.props.userInfo.token)}};fetch("https://mighty-oasis-08080.herokuapp.com/api/profiles/".concat(a.props.match.params.username,"/follow"),e)})):"unfollow"===e.target.dataset.id&&a.setState({following:!1},(function(){var e={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.props.userInfo.token)}};fetch("https://mighty-oasis-08080.herokuapp.com/api/profiles/".concat(a.props.match.params.username,"/follow"),e)}))},a.state={user:null,error:!1,following:!1},a}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props.match.params.username);var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:this.props.userInfo?"Bearer ".concat(this.props.userInfo.token):null}};fetch("https://mighty-oasis-08080.herokuapp.com/api/profiles/".concat(this.props.match.params.username),t).then((function(t){if("Not Found"!==t.statusText)return t.json();console.log("error if"),e.setState({user:null,error:!0})})).then((function(t){t&&e.setState({user:t.profile,following:t.profile.following})}))}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.match.params.username!==e.match.params.username&&fetch("https://mighty-oasis-08080.herokuapp.com/api/profiles/".concat(this.props.match.params.username)).then((function(e){if("Not Found"!==e.statusText)return e.json();console.log("error if"),t.setState({user:null,error:!0})})).then((function(e){e&&t.setState({user:e.profile})}))}},{key:"render",value:function(){return Object(x.jsx)(x.Fragment,{children:this.state.user?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"hero is-dark is-small py-6",children:Object(x.jsxs)("div",{className:"hero-body has-text-centered mx-6",children:[Object(x.jsx)("div",{className:"level",children:Object(x.jsx)("div",{className:"level-item",children:Object(x.jsx)("figure",{class:"image is-128x128 ",children:Object(x.jsx)("img",{className:"is-rounded",src:this.state.user.image,alt:"profile"})})})}),Object(x.jsx)("div",{className:"is-size-1",children:this.state.user.username}),Object(x.jsx)("div",{className:"subtitle has-text-success",children:this.state.user.bio}),this.props.userInfo&&this.props.userInfo.username!==this.state.user.username?this.state.following?Object(x.jsx)("div",{className:"button","data-id":"unfollow",onClick:this.handleClick,children:"Unfollow"}):Object(x.jsx)("div",{className:"button","data-id":"follow",onClick:this.handleClick,children:"Follow"}):""]})}),Object(x.jsx)(T,{user:this.state.user,loggedInUser:this.props.userInfo})]}):this.state.error?Object(x.jsx)("div",{className:"has-text-danger-dark mt-6 container title has-text-centered",children:"No User Found!"}):Object(x.jsxs)("div",{className:"has-text-success-dark mt-6 container title has-text-centered",children:["Loading  ",Object(x.jsxs)("div",{className:"lds-ellipsis ",children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{})]})]})})}}]),s}(a.Component),A=Object(m.f)(z),P=function(e){Object(j.a)(s,e);var t=Object(p.a)(s);function s(e){var a;return Object(d.a)(this,s),(a=t.call(this,e)).handleChange=function(e){"email"===e.target.name?a.setState({email:e.target.value}):"username"===e.target.name?a.setState({username:e.target.value}):"bio"===e.target.name?a.setState({bio:e.target.value}):"image"===e.target.name?a.setState({image:e.target.value}):"password"===e.target.name&&a.setState({password:e.target.value})},a.handleClick=function(e){console.log(a.props.userInfo.token),a.setState({status:"loading"},(function(){var e=a.state.password?{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.props.userInfo.token)},body:JSON.stringify({user:{username:a.state.username,email:a.state.email,password:a.state.password,bio:a.state.bio,image:a.state.image}})}:{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.props.userInfo.token)},body:JSON.stringify({user:{username:a.state.username,email:a.state.email,bio:a.state.bio,image:a.state.image}})};fetch("https://mighty-oasis-08080.herokuapp.com/api/user",e).then((function(e){return e.json()})).then((function(e){console.log(e),"errors"in e?a.setState({status:null},(function(){a.props.history.push("/settings")})):"user"in e&&(a.props.logIn(e.user),a.setState({error:""},(function(){a.props.history.push("/profiles/".concat(e.user.username))})))}))}))},a.state={status:null,username:null,email:null,bio:null,image:null,password:"",error:null},a}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this;if(this.props.userInfo){var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.userInfo.token)}};this.setState({status:"loading"},(function(){fetch("https://mighty-oasis-08080.herokuapp.com/api/user",t).then((function(e){return e.json()})).then((function(t){console.log(t.user),t.user&&e.setState({status:null,username:t.user.username,email:t.user.email,bio:t.user.bio,image:t.user.image})}))}))}else this.props.history.push("/")}},{key:"render",value:function(){return Object(x.jsx)("div",{className:"columns is-centered py-0",children:"loading"===this.state.status?Object(x.jsxs)("div",{className:" py-5 pb-6 px-4 column articles-loading is-half is-size-2 has-text-centered has-text-success-dark",children:[" ","Updating User Settings ",Object(x.jsxs)("div",{className:"lds-ellipsis ",children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{})]})]}):Object(x.jsxs)("div",{className:"box m-6 py-5 pb-6 px-4 column is-half has-background-light",children:[Object(x.jsx)("div",{className:"title has-text-centered my-1 mb-4",children:"Settings"}),Object(x.jsx)("div",{className:"field",children:Object(x.jsxs)("p",{className:"control has-icons-left",children:[Object(x.jsx)("input",{className:"input",type:"text",name:"image",value:this.state.image?this.state.image:this.props.userInfo.image,onChange:this.handleChange}),Object(x.jsx)("span",{className:"icon is-small is-left",children:Object(x.jsx)("i",{className:"fas fa-camera"})})]})}),Object(x.jsx)("div",{className:"field",children:Object(x.jsxs)("p",{className:"control has-icons-left",children:[Object(x.jsx)("input",{className:"input",type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),Object(x.jsx)("span",{className:"icon is-small is-left",children:Object(x.jsx)("i",{className:"fas fa-user"})})]})}),Object(x.jsx)("div",{className:"field",children:Object(x.jsxs)("p",{className:"control has-icons-left has-icons-right",children:[Object(x.jsx)("input",{className:"input",type:"email",placeholder:"Email",name:"email",value:this.state.email,onChange:this.handleChange}),Object(x.jsx)("span",{className:"icon is-small is-left",children:Object(x.jsx)("i",{className:"fas fa-envelope"})})]})}),Object(x.jsx)("div",{className:"field",children:Object(x.jsxs)("p",{className:"control has-icons-left",children:[Object(x.jsx)("input",{className:"input",type:"password",name:"password",value:this.state.password,onChange:this.handleChange,placeholder:"Password"}),Object(x.jsx)("span",{className:"icon is-small is-left",children:Object(x.jsx)("i",{className:"fas fa-lock"})})]})}),Object(x.jsx)("div",{className:"field",children:Object(x.jsx)("p",{className:"control has-icons-left",children:Object(x.jsx)("textarea",{className:"textarea px-4",type:"textarea",name:"bio",rows:"5",value:this.state.bio,onChange:this.handleChange,placeholder:"Write a few words about your here..."})})}),Object(x.jsx)("div",{className:"field ",children:Object(x.jsxs)("p",{className:"control level ",children:[Object(x.jsx)("div",{className:"level-left"}),Object(x.jsx)("button",{className:"button level-right is-success",onClick:this.handleClick,children:"Update"})]})})]})})}}]),s}(a.Component),M=Object(m.f)(P);var L=function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{className:"title has-text-danger-dark has-text-centered mt-6 container",children:"404 Not found! :("})})},D=function(e){Object(j.a)(s,e);var t=Object(p.a)(s);function s(e){var a;return Object(d.a)(this,s),(a=t.call(this,e)).handleChange=function(e){"title"===e.target.name?a.setState({title:e.target.value}):"body"===e.target.name?a.setState({body:e.target.value}):"description"===e.target.name?a.setState({description:e.target.value}):"taglist"===e.target.name&&a.setState({taglist:e.target.value})},a.handleClick=function(){var e={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.props.userInfo.token)},body:JSON.stringify({article:{title:a.state.title,body:a.state.body,description:a.state.description,tagList:a.state.taglist.split(",")}})};a.setState({status:"loading"},(function(){fetch("https://mighty-oasis-08080.herokuapp.com/api/articles",e).then((function(e){return e.json()})).then((function(e){console.log(e.article),e.article&&a.props.history.push("/articles/".concat(e.article.slug))}))}))},a.state={status:null,taglist:[],description:null,body:null,title:null},a}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.props.userInfo||this.props.history.push("/")}},{key:"render",value:function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{className:"columns is-centered py-0",children:"loading"===this.state.status?Object(x.jsxs)("div",{className:" py-5 pb-6 px-4 column articles-loading is-half is-size-2 has-text-centered has-text-success-dark",children:[" ","Publishing your Article ",Object(x.jsxs)("div",{className:"lds-ellipsis ",children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{})]})]}):Object(x.jsxs)("div",{className:"box m-6 py-5 pb-6 px-4 column is-three-fifths has-background-light",children:[Object(x.jsx)("div",{className:"title has-text-centered my-3 mb-4",children:"Create Article"}),Object(x.jsx)("div",{class:"field",children:Object(x.jsx)("p",{class:"control ",children:Object(x.jsx)("input",{class:"input p-3",type:"text",name:"title",value:this.state.title,onChange:this.handleChange,placeholder:"Title"})})}),Object(x.jsx)("div",{class:"field",children:Object(x.jsx)("p",{class:"control ",children:Object(x.jsx)("input",{class:"input p-3",type:"text",placeholder:"Description",name:"description",value:this.state.description,onChange:this.handleChange})})}),Object(x.jsx)("div",{class:"field",children:Object(x.jsx)("p",{class:"control ",children:Object(x.jsx)("textarea",{class:"textarea p-3",name:"body",placeholder:"Article's Body",value:this.state.body,onChange:this.handleChange})})}),Object(x.jsx)("div",{class:"field",children:Object(x.jsx)("p",{class:"control",children:Object(x.jsx)("input",{class:"input p-3",type:"text",placeholder:"Tag List (comma separated) e.g. css, html, javascript",name:"taglist",value:this.state.taglist,onChange:this.handleChange})})}),Object(x.jsx)("div",{class:"field ",children:Object(x.jsxs)("p",{class:"control level ",children:[Object(x.jsx)("div",{className:"level-left"}),Object(x.jsx)("button",{class:"button level-right is-success",onClick:this.handleClick,children:"Publish"})]})})]})})})}}]),s}(a.Component),B=Object(m.f)(D),F=function(e){Object(j.a)(s,e);var t=Object(p.a)(s);function s(e){var a;return Object(d.a)(this,s),(a=t.call(this,e)).handleChange=function(e){"title"===e.target.name?a.setState({title:e.target.value}):"body"===e.target.name?a.setState({body:e.target.value}):"description"===e.target.name?a.setState({description:e.target.value}):"tagList"===e.target.name&&a.setState({tagList:e.target.value})},a.handleClick=function(){var e={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.props.userInfo.token)},body:JSON.stringify({article:{title:a.state.title,body:a.state.body,description:a.state.description,tagList:a.state.tagList.split(",")}})};a.setState({status:"loading"},(function(){fetch("https://mighty-oasis-08080.herokuapp.com/api/articles/".concat(a.props.match.params.slug),e).then((function(e){return e.json()})).then((function(e){console.log(e),e.article&&a.props.history.push("/articles/".concat(e.article.slug))}))}))},a.state={status:null,tagList:null,description:null,body:null,title:null},a}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.props.userInfo?this.setState({status:"loading"},(function(){fetch("https://mighty-oasis-08080.herokuapp.com/api/articles/".concat(e.props.match.params.slug)).then((function(e){return e.json()})).then((function(t){console.log(t.article),e.setState({tagList:t.article.tagList.join(),description:t.article.description,body:t.article.body,title:t.article.title,status:null})}))})):this.props.history.push("/")}},{key:"render",value:function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{className:"columns is-centered py-0",children:"loading"===this.state.status?Object(x.jsxs)("div",{className:"lds-ellipsis ",children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{})]}):Object(x.jsxs)("div",{className:"box m-6 py-5 pb-6 px-4 column is-three-fifths has-background-light",children:[Object(x.jsx)("div",{className:"title has-text-centered my-3 mb-4",children:"Edit Article"}),Object(x.jsx)("div",{class:"field",children:Object(x.jsx)("p",{class:"control ",children:Object(x.jsx)("input",{class:"input p-3",type:"text",name:"title",value:this.state.title,onChange:this.handleChange,placeholder:"Title"})})}),Object(x.jsx)("div",{class:"field",children:Object(x.jsx)("p",{class:"control ",children:Object(x.jsx)("input",{class:"input p-3",type:"text",placeholder:"Description",name:"description",value:this.state.description,onChange:this.handleChange})})}),Object(x.jsx)("div",{class:"field",children:Object(x.jsx)("p",{class:"control ",children:Object(x.jsx)("textarea",{class:"textarea p-3",name:"body",placeholder:"Article's Body",value:this.state.body,onChange:this.handleChange})})}),Object(x.jsx)("div",{class:"field",children:Object(x.jsx)("p",{class:"control",children:Object(x.jsx)("input",{class:"input p-3",type:"text",placeholder:"Tag List (comma separated) e.g. css, html, javascript",name:"tagList",value:this.state.tagList,onChange:this.handleChange})})}),Object(x.jsx)("div",{class:"field ",children:Object(x.jsxs)("p",{class:"control level ",children:[Object(x.jsx)("div",{className:"level-left"}),Object(x.jsx)("button",{class:"button level-right is-success",onClick:this.handleClick,children:"Update Article"})]})})]})})})}}]),s}(a.Component),U=Object(m.f)(F),J=function(e){Object(j.a)(s,e);var t=Object(p.a)(s);function s(e){var a;return Object(d.a)(this,s),(a=t.call(this,e)).logIn=function(e){a.setState({userInfo:e})},a.logOut=function(){localStorage.removeItem("userInfo"),a.setState({userInfo:null})},a.state={userInfo:JSON.parse(localStorage.getItem("userInfo"))?JSON.parse(localStorage.getItem("userInfo")):null,maxArticles:null},a}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://mighty-oasis-08080.herokuapp.com/api/articles?limit=10").then((function(e){return e.json()})).then((function(e){return console.log(e),e.articlesCount})).then((function(e){t.setState({maxArticles:e})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(N,{userInfo:this.state.userInfo,logOut:this.logOut,updatePage:this.updatePage}),Object(x.jsxs)(m.c,{children:[Object(x.jsx)(m.a,{path:"/login",exact:!0,children:Object(x.jsx)("div",{className:"container",children:Object(x.jsx)(g,{userInfo:this.state.userInfo,logIn:this.logIn})})}),Object(x.jsx)(m.a,{path:"/register",exact:!0,children:Object(x.jsx)("div",{className:"container",children:Object(x.jsx)(v,{userInfo:this.state.userInfo})})}),Object(x.jsx)(m.a,{path:"/articles/:slug",render:function(t){return Object(x.jsx)(I,Object(r.a)(Object(r.a)({userInfo:e.state.userInfo},t),{},{exact:!0}))}}),Object(x.jsx)(m.a,{path:"/article/edit/:slug",render:function(t){return Object(x.jsx)(U,Object(r.a)(Object(r.a)({userInfo:e.state.userInfo},t),{},{exact:!0}))}}),Object(x.jsx)(m.a,{path:"/articles",exact:!0,children:Object(x.jsx)(C,{maxArticles:this.state.maxArticles,userInfo:this.state.userInfo})}),Object(x.jsx)(m.a,{path:"/dashboard",exact:!0,children:Object(x.jsx)(E,{maxArticles:this.state.maxArticles,userInfo:this.state.userInfo})}),Object(x.jsx)(m.a,{path:"/profiles",render:function(t){return Object(x.jsx)(A,Object(r.a)({userInfo:e.state.userInfo},t))},exact:!0}),Object(x.jsx)(m.a,{path:"/profiles/:username",render:function(t){return Object(x.jsx)(A,Object(r.a)({userInfo:e.state.userInfo},t))},exact:!0}),Object(x.jsx)(m.a,{path:"/settings",exact:!0,children:Object(x.jsx)(M,{userInfo:this.state.userInfo,logIn:this.logIn})}),Object(x.jsx)(m.a,{path:"/new",exact:!0,children:Object(x.jsx)(B,{userInfo:this.state.userInfo})}),Object(x.jsx)(m.a,{path:"/",exact:!0,children:Object(x.jsx)(k,{userInfo:this.state.userInfo,exact:!0})}),Object(x.jsx)(m.a,{component:L})]})]})}}]),s}(n.a.Component);s(38),s(39);c.a.render(Object(x.jsx)(b.a,{children:Object(x.jsx)(J,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.ce3625ed.chunk.js.map